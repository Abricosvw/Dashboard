# Исправление ошибки компиляции SD Card Manager

## Проблема
Ошибка компиляции из-за отсутствия заголовочного файла `sys/statvfs.h` в ESP-IDF:
```
fatal error: sys/statvfs.h: No such file or directory
```

## Решение
Заменил использование POSIX функции `statvfs()` на альтернативные методы:

### 1. Функция получения информации о SD карте
- Вместо `statvfs()` используется информация из структуры `sdmmc_card_t`
- Для определения свободного места используется упрощенный подход с тестовой записью
- Это временное решение, но оно работает для базовой диагностики

### 2. Проверка существования директорий
- Вместо `stat()` используется `opendir()` для проверки доступности директории
- Это кроссплатформенный подход, который работает в ESP-IDF

## Внесенные изменения

1. **Удален** `#include <sys/statvfs.h>`
2. **Изменена** функция `sd_card_get_info()`:
   - Использует `s_card->csd.capacity` для получения общего объема
   - Использует тестовую запись для проверки возможности записи
   - Возвращает оценочное значение свободного места

3. **Изменена** функция `ensure_dir_exists()`:
   - Использует `opendir()` вместо `stat()`

4. **Изменена** диагностическая функция:
   - Использует `opendir()` для проверки точки монтирования

## Ограничения текущего решения

- Функция свободного места возвращает оценочное значение (10% от общего объема)
- Для точного определения свободного места потребуется прямой доступ к FATFS API
- В будущем можно улучшить, используя низкоуровневые функции FATFS

## Компиляция

Теперь проект должен компилироваться без ошибок. Запустите компиляцию:
```bash
idf.py build
```

После успешной компиляции прошейте устройство:
```bash
idf.py -p COM13 flash monitor
```
